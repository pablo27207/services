<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard de Ingesta - Estado del Backend</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body class="bg-gray-100 text-gray-800 min-h-screen">

  <!-- Navbar -->
  <nav class="bg-blue-700 text-white p-4 shadow">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-semibold"> Dashboard de Ingesta Oceanogr谩fica</h1>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto p-6 space-y-12">

    <!-- Estado del Backend -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="bg-white shadow rounded p-4 text-center">
        <h2 class="text-lg font-semibold">Base de Datos</h2>
        <p id="estado-db" class="text-gray-600 font-bold">...</p>
      </div>
      <div class="bg-white shadow rounded p-4 text-center">
        <h2 class="text-lg font-semibold">Celery</h2>
        <p id="estado-celery" class="text-gray-600 font-bold">...</p>
      </div>
      <div class="bg-white shadow rounded p-4 text-center">
        <h2 class="text-lg font-semibold">Redis</h2>
        <p id="estado-redis" class="text-gray-600 font-bold">...</p>
      </div>
    </section>

    <!-- ltimas ejecuciones -->
    <section class="bg-white shadow rounded p-6">
      <h2 class="text-xl font-semibold mb-4">ltimas ejecuciones de tareas</h2>
      <ul id="lista-tareas" class="list-disc pl-6 text-sm text-gray-700 space-y-1"></ul>
    </section>

    <!-- Botones de actualizaci贸n -->
    <section class="bg-blue-50 border border-blue-100 shadow rounded p-6">
      <h2 class="text-xl font-semibold text-blue-800 mb-4">Forzar actualizaci贸n de datos</h2>
      <div class="flex flex-wrap justify-center gap-4">
        <button onclick="forzarActualizacion('buoy')"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">Actualizar Boya</button>
        <button onclick="forzarActualizacion('mareograph')"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">Actualizar Mare贸grafo</button>
        <button onclick="forzarActualizacion('tide_forecast')"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">Actualizar Predicci贸n</button>
        <button onclick="forzarActualizacion('caleta_muelle_dock')"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">Actualizar Caleta
          C贸rdova</button>
        <button onclick="forzarActualizacion('comodoro_rivadavia_port')"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">Actualizar Comodoro
          Rivadavia</button>
      </div>
      <div id="estado-actualizacion" class="mt-4 text-sm font-medium text-gray-700 text-center"></div>
    </section>

    <!-- Gr谩fico de Mare贸grafo y Predicci贸n -->
    <section>
      <h2 class="text-2xl font-bold text-center mb-4">Mare贸grafo y Predicci贸n</h2>
      <div class="bg-white rounded shadow p-4 max-w-5xl mx-auto">
        <svg id="mareograph_chart" class="w-full h-64"></svg>
      </div>
    </section>

    <!-- Gr谩ficos de la boya -->
    <section>
      <h2 class="text-2xl font-bold text-center mb-6">Datos de la Boya Oceanogr谩fica</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8">
        <div>
          <h3 class="text-center font-semibold mb-2">Altura de Olas</h3><svg id="altura_olas_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Periodo de Olas</h3><svg id="periodo_olas_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Direcci贸n de Olas</h3><svg id="direccion_olas_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Velocidad de Corriente</h3><svg id="velocidad_corriente_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Direcci贸n de la Corriente</h3><svg id="direccion_corriente_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Radiaci贸n PAR</h3><svg id="radiacion_par_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Bater铆a</h3><svg id="bateria_chart" class="w-full h-64"></svg>
        </div>
      </div>
    </section>

    <!-- Estaci贸n Puerto CR -->
    <section>
      <h2 class="text-2xl font-bold text-center mb-6">Estaci贸n Meteorol贸gica Puerto CR</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8">
        <div>
          <h3 class="text-center font-semibold mb-2">Temperatura Exterior</h3><svg id="puerto_temp_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Velocidad del Viento</h3><svg id="puerto_wind_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Presi贸n Barom茅trica</h3><svg id="puerto_pressure_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Humedad Exterior</h3><svg id="puerto_hum_chart"
            class="w-full h-64"></svg>
        </div>
      </div>
    </section>

    <!-- Estaci贸n Muelle CC -->
    <section>
      <h2 class="text-2xl font-bold text-center mb-6">Estaci贸n Meteorol贸gica Muelle CC</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8">
        <div>
          <h3 class="text-center font-semibold mb-2">Temperatura Exterior</h3><svg id="muelle_temp_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Velocidad del Viento</h3><svg id="muelle_wind_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Direcci贸n del Viento</h3><svg id="muelle_wind_dir_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Presi贸n Barom茅trica</h3><svg id="muelle_pressure_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Punto de Roc铆o</h3><svg id="muelle_dew_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Sensaci贸n T茅rmica</h3><svg id="muelle_chill_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">ndice de Calor</h3><svg id="muelle_heat_chart"
            class="w-full h-64"></svg>
        </div>
        <div>
          <h3 class="text-center font-semibold mb-2">Tasa de Lluvia</h3><svg id="muelle_rain_chart"
            class="w-full h-64"></svg>
        </div>
      </div>
    </section>

    <!-- Tooltip -->
    <div id="tooltip"
      class="absolute bg-white border border-gray-300 text-xs p-2 rounded shadow hidden pointer-events-none z-50"></div>

  </main>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>